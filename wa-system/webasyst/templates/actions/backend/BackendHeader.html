<div id="wa-nav">
    {if $wa->whichUI() == '2.0'}
        <script>const backend_url = "{$backend_url}";</script>
        {include file="./BackendHeader20.html" inline}
    {else}
        {include file="./BackendHeader13.html" inline}
    {/if}

    {if ifset($app_info, 'ui', '1.3,2.0') === '1.3,2.0'}

        {*** ¯\_WA2UI_/¯ : global ui version toggle; when preparing for the first production deployment, replace <select> with a smarter UI switcher that depends on the app config 'ui' declaration  ***}

        <script>
            function _setCookie(cname, cvalue, exdays) {
                var d = new Date();
                d.setTime(d.getTime() + (exdays*24*60*60*1000));
                var expires = "expires="+d.toUTCString();
                document.cookie = cname + "=" + cvalue + "; " + expires + "; path=/";
            }
        </script>

        {* keep inline style="" to maintain same solid view in both wa-1.3 and wa-2.0 environments *}
        <div style="position: fixed; z-index: 1312; bottom: 20px; right: 20px; border-radius: 5px; background: #fea; padding: 15px; box-shadow: 0 5px 20px -10px rgba(0,0,0,0.1); font-size: 16px;">
            <select onChange="_setCookie('force_set_wa_backend_ui_version', this.options[this.selectedIndex].value, 7); window.location.reload();" style="font-size: 16px;">
                <option value="1.3"{if !$wa->cookie('force_set_wa_backend_ui_version') || $wa->cookie('force_set_wa_backend_ui_version') == '1.3'} selected{/if}>1.3</option>
                <option value="2.0"{if $wa->cookie('force_set_wa_backend_ui_version') == '2.0'} selected{/if}>2.0</option>
            </select>
            {if $wa->cookie('force_set_wa_backend_ui_version') == '2.0'}
                <span style="display: inline-block; border-radius: 50%; border: 1px solid rgba(0,0,0,0.2); width: 18px; height: 18px; background: white; box-shadow: 0 3px 5px -2px rgba(0,0,0,0.2); position: relative; top: 3px; margin: 0 1px 0 8px; cursor: pointer" title="[s`Light mode ON`]" data-wa-theme-mode="light"></span>
                <span style="display: inline-block; border-radius: 50%; border: 1px solid rgba(0,0,0,0.2); width: 18px; height: 18px; background: #333; box-shadow: 0 3px 6px -2px rgba(0,0,0,0.42); position: relative; top: 3px; margin: 0 2px; cursor: pointer" title="[s`Dark mode ON`]" data-wa-theme-mode="dark"></span>
                <span style="display: inline-block; border-radius: 50%; overflow: hidden; border: 1px solid rgba(0,0,0,0.2); width: 18px; height: 18px; position: relative; top: 3px; margin: 0 2px; cursor: pointer" title="[s`Auto (based on device settings)`]" data-wa-theme-mode="auto"><i style="background: linear-gradient(-90deg, rgba(51,51,51,1) 40%, rgba(255,255,255,1) 60%); box-shadow: 0 3px 6px -2px rgba(0,0,0,0.42); display: block; width: 18px; height: 18px;"></i></span>
            {/if}
        </div>

        {*** ¯\_WA2UI_/¯ ***}

    {elseif ifset($app_info, 'ui', '1.3,2.0') === '1.3'}

        <div style="position: fixed; z-index: 1312; bottom: 20px; right: 20px; border-radius: 5px; background: #fea; padding: 15px; box-shadow: 0 5px 20px -10px rgba(0,0,0,0.1); font-size: 10px; color: red">
            <p style="margin:0">Это приложение не поддерживает новый интерфейс.<br>
                Свяжитесь с разработчиком.<br>
                Включить 2.0 нельзя, но это предупреждение будет висеть постоянно</p>
        </div>

    {/if}
</div>
{if $wa->whichUI() == '2.0'}
<div class="wa-header-background dialog-background js-header-background"></div>
{/if}
